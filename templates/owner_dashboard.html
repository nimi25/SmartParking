<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Owner Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    /* Container for the cards */
    .card-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    /* Each individual card */
    .card {
      flex: 1 1 calc(33.33% - 20px); /* Three cards per row (adjust as needed) */
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
      background-color: #fff;
    }
    .card h3 {
      margin-top: 0;
    }
    .card p {
      margin: 8px 0;
    }
    .card-actions {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    /* Make the embedded map responsive */
    .map-container iframe {
      width: 100%;
      height: 200px;
      border: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Welcome, Owner!</h2>
    <a href="{{ url_for('parking.add_parking_spot') }}">Add a Parking Spot</a> |
    <a href="{{ url_for('auth.logout') }}">Logout</a>
    <h3>Your Parking Spots</h3>
    <div class="card-container">
      {% for spot in spots %}
        <div class="card">
          <h3>{{ spot.location }}</h3>
          <p><strong>Price:</strong> â‚¹{{ spot.price }}</p>
          <p><strong>Status:</strong> {{ "Available" if spot.availability else "Not Available" }}</p>
          <p><strong>Available Hours:</strong>
            {% if spot.available_from and spot.available_to %}
              {{ spot.available_from.strftime('%I:%M %p') }} to {{ spot.available_to.strftime('%I:%M %p') }}
            {% else %}
              N/A
            {% endif %}
          </p>
          {% if spot.google_maps_link %}
            <div class="map-container">
              <iframe src="{{ spot.google_maps_link }}" allowfullscreen="" loading="lazy"></iframe>
            </div>
          {% endif %}
          <p><strong>2-Wheeler Spaces:</strong> {{ spot.two_wheeler_spaces or 0 }}</p>
          <p><strong>4-Wheeler Spaces:</strong> {{ spot.four_wheeler_spaces or 0 }}</p>
          <p><strong>Description:</strong> {{ spot.description or "N/A" }}</p>
          <div class="card-actions">
            <a href="{{ url_for('parking.update_parking_spot', spot_id=spot.id) }}" class="btn btn-primary">Edit</a>
            <form action="{{ url_for('parking.delete_parking_spot', spot_id=spot.id) }}" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this spot?');">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </div>
        </div>
      {% else %}
        <p>No parking spots added yet.</p>
      {% endfor %}
    </div>
  </div>
</body>
</html>
